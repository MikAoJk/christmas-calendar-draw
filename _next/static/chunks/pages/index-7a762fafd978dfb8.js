(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return __webpack_require__(4560)}])},4560:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return pages}});var jsx_runtime=__webpack_require__(5893),head=__webpack_require__(9008),head_default=__webpack_require__.n(head),Home_module=__webpack_require__(4456),Home_module_default=__webpack_require__.n(Home_module),react=__webpack_require__(7294);let Wheel=wheelProps=>{let contrastColor="white",primaryColor="black",fontFamily="proxima-nova",currentParticipant="",isStarted=!1,[isFinished,setFinished]=(0,react.useState)(!1),timerHandle=0,timerDelay=wheelProps.participants.length,angleCurrent=0,angleDelta=0,canvasContext=null,maxSpeed=Math.PI/wheelProps.participants.length,upTime=100*wheelProps.participants.length,downTime=1e3*wheelProps.participants.length,spinStart=new Date().getTime(),frames=0;(0,react.useEffect)(()=>{wheelInit(),setTimeout(()=>{window.scrollTo(0,1)},0)},[]);let wheelInit=()=>{initCanvas(),wheelDraw()},initCanvas=()=>{let canvas=document.getElementById("canvas");if(-1!==navigator.userAgent.indexOf("MSIE")){var ref;null==(canvas=document.createElement("canvas"))||canvas.setAttribute("width",String(530)),null==canvas||canvas.setAttribute("height",String(530)),null==canvas||canvas.setAttribute("id","canvas"),null===(ref=null==document?void 0:document.getElementById("wheel"))||void 0===ref||ref.appendChild(canvas)}canvas.addEventListener("click",spin,!1),canvasContext=canvas.getContext("2d")},getRandomIntInclusive=()=>Math.floor(8*Math.random()+1),spin=()=>{isStarted=!0,0===timerHandle&&(maxSpeed=(Math.PI+getRandomIntInclusive())/wheelProps.participants.length,frames=0,timerHandle=setInterval(onTimerTick,timerDelay))},onTimerTick=()=>{let progress;frames++,draw();let duration=new Date().getTime()-spinStart,finished=!1;for(duration<upTime?angleDelta=maxSpeed*Math.sin((progress=duration/upTime)*Math.PI/2):(angleDelta=maxSpeed*Math.sin((progress=duration/downTime)*Math.PI/2+Math.PI/2),progress>=1&&(finished=!0)),angleCurrent+=angleDelta;angleCurrent>=2*Math.PI;)angleCurrent-=2*Math.PI;finished&&(setFinished(!0),wheelProps.onFinished(currentParticipant),clearInterval(timerHandle),timerHandle=0,angleDelta=0)},wheelDraw=()=>{clear(),drawWheel(),drawNeedle()},draw=()=>{clear(),drawWheel(),drawNeedle()},drawSegment=(key,lastAngle,angle)=>{let ctx=canvasContext,value=wheelProps.participants[key].name;ctx.save(),ctx.beginPath(),ctx.moveTo(300,300),ctx.arc(300,300,220,lastAngle,angle,!1),ctx.lineTo(300,300),ctx.closePath(),ctx.fillStyle=wheelProps.participants[key].color,ctx.fill(),ctx.stroke(),ctx.save(),ctx.translate(300,300),ctx.rotate((lastAngle+angle)/2),ctx.fillStyle=contrastColor,ctx.font="bold 1em "+fontFamily,ctx.fillText(value.substring(0,21),130,0),ctx.restore()},drawWheel=()=>{let ctx=canvasContext,lastAngle=angleCurrent,len=wheelProps.participants.length,PI2=2*Math.PI;ctx.lineWidth=1,ctx.strokeStyle=primaryColor,ctx.textBaseline="middle",ctx.textAlign="center",ctx.font="1em "+fontFamily;for(let i=1;i<=len;i++){let angle=PI2*(i/len)+angleCurrent;drawSegment(i-1,lastAngle,angle),lastAngle=angle}ctx.beginPath(),ctx.arc(300,300,50,0,PI2,!1),ctx.closePath(),ctx.fillStyle=primaryColor,ctx.lineWidth=10,ctx.strokeStyle=contrastColor,ctx.fill(),ctx.font="bold 1em "+fontFamily,ctx.fillStyle=contrastColor,ctx.textAlign="center",ctx.fillText("spin",300,303),ctx.stroke(),ctx.beginPath(),ctx.arc(300,300,220,0,PI2,!1),ctx.closePath(),ctx.lineWidth=10,ctx.strokeStyle=primaryColor,ctx.stroke()},drawNeedle=()=>{let ctx=canvasContext;ctx.lineWidth=1,ctx.strokeStyle=contrastColor,ctx.fileStyle=contrastColor,ctx.beginPath(),ctx.moveTo(320,250),ctx.lineTo(280,250),ctx.lineTo(300,230),ctx.closePath(),ctx.fill();let change=angleCurrent+Math.PI/2,i=wheelProps.participants.length-Math.floor(change/(2*Math.PI)*wheelProps.participants.length)-1;i<0&&(i+=wheelProps.participants.length),ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=primaryColor,ctx.font="bold 1.5em "+fontFamily,currentParticipant=wheelProps.participants[i].name,isStarted&&ctx.fillText(currentParticipant,310,570)},clear=()=>{canvasContext.clearRect(0,0,530,530)};return(0,jsx_runtime.jsx)("div",{id:"wheel",children:(0,jsx_runtime.jsx)("canvas",{id:"canvas",width:"530",height:"530",style:{pointerEvents:isFinished?"none":"auto"}})})},PrevWinners=()=>(0,jsx_runtime.jsx)("div",{className:Home_module_default().container,children:(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{children:"Winner"}),(0,jsx_runtime.jsx)("th",{children:"Day"}),(0,jsx_runtime.jsx)("th",{children:"Price"})]})}),(0,jsx_runtime.jsx)("tbody",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:"Unknown"}),(0,jsx_runtime.jsx)("td",{children:"1"}),(0,jsx_runtime.jsx)("td",{children:"money"})]})})]})}),WheelOfFortune=()=>{let[winner,setWinner]=(0,react.useState)(""),winnerHandler=participant=>{setWinner(participant)};return(0,jsx_runtime.jsxs)("div",{className:Home_module_default().main,children:[(0,jsx_runtime.jsx)(PrevWinners,{}),winner&&(0,jsx_runtime.jsxs)("h3",{children:["Todays winner is: ",winner,"\uD83E\uDD47"]}),(0,jsx_runtime.jsx)(Wheel,{participants:(participants=>{let currentIndex=participants.length,randomIndex;for(;0!=currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),currentIndex--,[participants[currentIndex],participants[randomIndex]]=[participants[randomIndex],participants[currentIndex]];return participants})([{name:"per",color:"#EE4040"},{name:"ola",color:"#1f8314"},{name:"jonny",color:"#815CD1"},{name:"p\xe5l",color:"#a34508"},{name:"viggo",color:"#530dcb"},{name:"espen",color:"#EE4040"},{name:"trond",color:"#F0CF50"},{name:"hans",color:"#26303f"},{name:"vegard",color:"#3DA5E0"},{name:"joakim",color:"#34A24F"},{name:"\xf8yvind",color:"#a20ab4"},{name:"ronny",color:"#FF9000"}]),onFinished:winnerHandler})]})},Home=()=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)(head_default(),{children:[(0,jsx_runtime.jsx)("title",{children:"Christmas calendar draw"}),(0,jsx_runtime.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,jsx_runtime.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,jsx_runtime.jsx)("main",{children:(0,jsx_runtime.jsx)(WheelOfFortune,{})})]});var pages=Home},4456:function(module){module.exports={main:"Home_main__EtNt2"}},9008:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(3121)}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=8312)}),_N_E=__webpack_require__.O()}]);